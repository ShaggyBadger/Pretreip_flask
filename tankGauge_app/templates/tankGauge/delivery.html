{% extends "base.html" %} {% block content %} {% include 'nav_menu.html' %}
<div class="container mt-5" style="max-width: 600px">
  <h1 class="text-center fw-bold mono mb-5 mono" style="font-size: 2.5rem">
    Fuel Delivery Estimation
  </h1>
  <form
    method="POST"
    action="{{ url_for('tankgauge.delivery_submit') }}"
    class="needs-validation"
    novalidate
  >
    <input type="hidden" name="csrf_token" value="{{ csrf_token() }}" />
    <!-- Store Number Input -->
    <div class="mb-4">
      <label for="storeNumber" class="form-label mono fw-bold"
        >Store Number</label
      >
      <input
        type="text"
        class="form-control form-control-lg"
        id="storeNumber"
        name="store_number"
        placeholder="Enter store number"
        required
      />
    </div>

    <!-- Fuel Switches -->
    <div class="mb-4">
      <label class="form-label mono fw-bold mb-3">Select Fuel Types</label>

      {% for fuel in ['Regular', 'Plus', 'Premium', 'Kerosene', 'Diesel'] %}
      <div
        class="form-check form-switch d-flex align-items-center justify-content-between mb-3"
      >
        <label class="form-check-label mono fs-5" for="fuel_{{ fuel.lower() }}"
          >{{ fuel }}</label
        >
        <input
          class="form-check-input"
          type="checkbox"
          id="fuel_{{ fuel.lower() }}"
          name="fuel_types"
          value="{{ fuel.lower() }}"
          style="width: 3rem; height: 1.6rem"
        />
      </div>
      {% endfor %}
    </div>

    <!-- Submit Button -->
    <div class="d-grid">
      <button type="submit" class="btn btn-primary btn-lg mono">Submit</button>
    </div>
  </form>
</div>

<script>
  document.querySelector("form").addEventListener("submit", function (e) {
    const storeNumber = document.getElementById("storeNumber").value.trim();
    const fuelCheckboxes = document.querySelectorAll(
      "input[name='fuel_types']:checked"
    );

    if (!storeNumber || fuelCheckboxes.length === 0) {
      e.preventDefault(); // Stop form from submitting

      let msg = "Please do the following before proceeding:\n";
      if (!storeNumber) msg += "- Enter a store number\n";
      if (fuelCheckboxes.length === 0) msg += "- Select at least one fuel type";

      alert(msg);
    }
  });
</script>
{% endblock %}
